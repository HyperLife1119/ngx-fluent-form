import { Canvas, Meta, Story, Source } from '@storybook/addon-docs';
import { meta } from '../../';
import { story, jsonSource, jsonAndFluentSource, fluentAndJsonSource, expressionSource } from './';

<Meta
  title="FluentForm/Advanced"
  component={meta.component}
  decorators={meta.decorators}
  argTypes={meta.argTypes}
  parameters={meta.parameters} />

# Fluent API & JSON

> 为了方便展示，文档中将使用字面量对象（`object literal`）替代 JSON。

除了 Fluent API，你还可以使用 JSON 来构建表单：

<Canvas withToolbar isExpanded mdxSource={jsonSource}>
  <Story name="Fluent API & JSON">{story}</Story>
</Canvas>

你还可以混合使用 Fluent API 和 JSON：

<Source
  language="typescript"
  dark={true}
  code={jsonAndFluentSource} />

<Source
  language="typescript"
  dark={true}
  code={fluentAndJsonSource} />

## 静态表达式

### 介绍

组件图示的部分入参类型为**布尔值**的参数允许布尔值，或传入一个返回布尔值的函数；

但在 JSON 下是无法编写函数的，这时候可以传入一个字符串类型的静态表达式，该表达式的执行上下文为 `{ model: model }` 。在字符串中可以编写一些简单的 JS 表达式。

<Source
  language="typescript"
  dark={true}
  code={expressionSource} />

### 安全

目前，静态表达式是一个简易的沙箱环境下运行的，可通过一些手段逃逸出沙箱环境；开发者需要确保编写的表达式是安全的，没有被注入的。
