<form
  nz-row
  nz-form
  [nzGutter]="gutter"
  [nzLayout]="layout"
  [ngClass]="schema.class"
  [ngStyle]="schema.style"
  [formGroup]="form"
  [fluentBinderSchema]="schema"
  [fluentBinderControl]="form">
  <ng-template #formColTemplate let-schema="schema" let-control="control" let-model="model">
    <nz-col
      [nzSpan]="(schema.col | typeof: 'number') ? schema.col : schema.col?.span"
      [nzOffset]="schema.col?.offset"
      [nzFlex]="schema.col?.flex"
      [hidden]="schema.hidden | call: model:schema:control">
      <fluent-form-col-content-outlet
        [control]="control"
        [schema]="schema"
        [model]="model"></fluent-form-col-content-outlet>
    </nz-col>
  </ng-template>

  <ng-container
    *ngFor="let subschema of schema.schemas"
    [ngTemplateOutlet]="formColTemplate"
    [ngTemplateOutletContext]="{ control: ($any(subschema).name | control: form), schema: subschema, model: model }">
  </ng-container>
</form>
