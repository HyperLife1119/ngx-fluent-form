<ng-template let-control="control" let-schema="schema" let-model="model" [fluentWithContextGuard]="contextGuard">
  <nz-input-group
    #cmp
    nzCompact
    [fluentBinder]="cmp"
    [fluentBinderSchema]="schema"
    [ngClass]="schema.class"
    [ngStyle]="schema.style"
    [nzAddOnAfter]="schema.after?.icon ? null : schema.after"
    [nzAddOnAfterIcon]="schema.after?.icon"
    [nzAddOnBefore]="schema.before?.icon ? null : schema.before"
    [nzAddOnBeforeIcon]="schema.before?.icon"
    [nzPrefix]="schema.prefix?.icon ? null : schema.prefix"
    [nzPrefixIcon]="schema.prefix?.icon"
    [nzSize]="schema.size"
    [nzSuffix]="schema.suffix?.icon ? null : schema.suffix"
    [nzSuffixIcon]="schema.suffix?.icon">
    <ng-container
      *ngFor="let subschema of schema.schemas"
      fluentWithInjector
      [ngTemplateOutlet]="subschema.kind | widgetTemplateRef"
      [ngTemplateOutletContext]="{ control: (subschema.name | control: control), schema: subschema, model: model }">
    </ng-container>
  </nz-input-group>
</ng-template>
