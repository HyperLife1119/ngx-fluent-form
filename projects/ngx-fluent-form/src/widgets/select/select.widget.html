<ng-template let-control="control" let-schema="schema" let-model="model" [fluentWithContextGuard]="contextGuard">
  <nz-select
    *fluentComposable="composableTemplate"
    #cmp
    [fluentBinder]="cmp"
    [fluentBinderSchema]="schema"
    [fluentBinderControl]="control"
    [formControl]="control"
    [ngClass]="schema.class"
    [ngStyle]="schema.style"
    [nzAllowClear]="schema.clearable"
    [nzId]="schema.id!"
    [nzMaxMultipleCount]="schema.limit ?? infinity"
    [nzMode]="schema.mode ?? 'default'"
    [nzPlaceHolder]="schema.placeholder!"
    [nzShowSearch]="schema.searchable"
    [nzBackdrop]="schema.backdrop!"
    [nzBorderless]="schema.borderless"
    [nzAutoFocus]="schema.autofocus"
    [nzShowArrow]="(schema.arrow ?? !schema.mode) || schema.mode === 'default'"
    [nzSize]="schema.size!"
    [nzSuffixIcon]="schema.suffixIcon!">
    <nz-option
      *ngFor="let option of schema.options"
      [nzDisabled]="option[schema.config?.disabledProperty ?? 'disabled']"
      [nzLabel]="option[schema.config?.labelProperty ?? 'label']"
      [nzValue]="option[schema.config?.valueProperty ?? 'value']">
    </nz-option>
  </nz-select>

  <ng-template #composableTemplate>
    <nz-select
      *ngIf="!(schema.hidden | call: model:schema:control)"
      #cmp
      nz-col
      [fluentBinder]="cmp"
      [fluentBinderSchema]="schema"
      [fluentBinderControl]="control"
      [formControl]="control"
      [ngClass]="schema.class"
      [ngStyle]="schema.style"
      [nzSpan]="helper.col.span | invoke: schema.col"
      [nzFlex]="helper.col.flex | invoke: schema.col"
      [nzOffset]="helper.col.offset | invoke: schema.col"
      [nzId]="schema.id!"
      [nzAllowClear]="schema.clearable"
      [nzMaxMultipleCount]="schema.limit ?? infinity"
      [nzMode]="schema.mode ?? 'default'"
      [nzPlaceHolder]="schema.placeholder!"
      [nzShowSearch]="schema.searchable"
      [nzShowSearch]="schema.searchable"
      [nzBackdrop]="schema.backdrop!"
      [nzBorderless]="schema.borderless"
      [nzAutoFocus]="schema.autofocus"
      [nzShowArrow]="(schema.arrow ?? !schema.mode) || schema.mode === 'default'"
      [nzSize]="schema.size!"
      [nzSuffixIcon]="schema.suffixIcon!">
      <nz-option
        *ngFor="let option of schema.options"
        [nzDisabled]="option[schema.config?.disabledProperty ?? 'disabled']"
        [nzLabel]="option[schema.config?.labelProperty ?? 'label']"
        [nzValue]="option[schema.config?.valueProperty ?? 'value']">
      </nz-option>
    </nz-select>
  </ng-template>
</ng-template>
