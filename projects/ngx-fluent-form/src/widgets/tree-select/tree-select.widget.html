<ng-template let-control="control" let-schema="schema" let-model="model" [fluentContextGuard]="contextGuard">
  <nz-tree-select
    *fluentComposable="composableTemplate"
    #cmp
    [fluentBinder]="cmp"
    [fluentBinderSchema]="schema"
    [fluentBinderControl]="control"
    [formControl]="control"
    [ngClass]="schema.class"
    [ngStyle]="schema.style"
    [nzId]="schema.id!"
    [nzAllowClear]="schema.clearable ?? true"
    [nzBackdrop]="schema.backdrop!"
    [nzShowIcon]="schema.icon"
    [nzShowSearch]="schema.searchable"
    [nzSize]="schema.size!"
    [nzCheckable]="helper.checkable | invoke: schema.checkable"
    [nzCheckStrictly]="helper.checkStrictly | invoke: schema.checkable"
    [nzShowExpand]="helper.showExpand | invoke: schema.expandIcon"
    [nzExpandedIcon]="helper.expandedIcon | invoke: schema.expandIcon"
    [nzShowLine]="schema.line"
    [nzAsyncData]="schema.async"
    [nzNodes]="schema.options"
    [nzDefaultExpandAll]="schema.expandAll"
    [nzExpandedKeys]="schema.expandedKeys!"
    [nzMultiple]="schema.multiple"
    [nzVirtualHeight]="schema.virtual?.height!"
    [nzVirtualItemSize]="schema.virtual?.itemSize ?? 28"
    [nzVirtualMaxBufferPx]="schema.virtual?.buffer?.max ?? 500"
    [nzVirtualMinBufferPx]="schema.virtual?.buffer?.min ?? 28"></nz-tree-select>

  <ng-template #composableTemplate>
    <nz-tree-select
      *ngIf="!(schema.hidden | call: model:schema:control)"
      #cmp
      nz-col
      [fluentBinder]="cmp"
      [fluentBinderSchema]="schema"
      [fluentBinderControl]="control"
      [formControl]="control"
      [ngClass]="schema.class"
      [ngStyle]="schema.style"
      [nzSpan]="schema.col | col: 'span'"
      [nzFlex]="schema.col | col: 'flex'"
      [nzOffset]="schema.col | col: 'offset'"
      [nzId]="schema.id!"
      [nzAllowClear]="schema.clearable ?? true"
      [nzBackdrop]="schema.backdrop!"
      [nzShowIcon]="schema.icon"
      [nzShowSearch]="schema.searchable"
      [nzSize]="schema.size!"
      [nzCheckable]="helper.checkable | invoke: schema.checkable"
      [nzCheckStrictly]="helper.checkStrictly | invoke: schema.checkable"
      [nzShowExpand]="helper.showExpand | invoke: schema.expandIcon"
      [nzExpandedIcon]="helper.expandedIcon | invoke: schema.expandIcon"
      [nzShowLine]="schema.line"
      [nzAsyncData]="schema.async"
      [nzNodes]="schema.options"
      [nzDefaultExpandAll]="schema.expandAll"
      [nzExpandedKeys]="schema.expandedKeys!"
      [nzMultiple]="schema.multiple"
      [nzVirtualHeight]="schema.virtual?.height!"
      [nzVirtualItemSize]="schema.virtual?.itemSize ?? 28"
      [nzVirtualMaxBufferPx]="schema.virtual?.buffer?.max ?? 500"
      [nzVirtualMinBufferPx]="schema.virtual?.buffer?.min ?? 28"></nz-tree-select>
  </ng-template>
</ng-template>
